<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="shuvayatra-feed.html">
<link rel="import" href="shuvayatra-header.html">

<link rel="import" href="shuvayatra-audio-detail.html">
<link rel="import" href="shuvayatra-video-detail.html">
<link rel="import" href="shuvayatra-text-detail.html">

<dom-module id="shuvayatra-post">
<template>
    <style is="custom-style">
        :host{
            display: block;
        }

        .content{
            padding-top: 20px;
        }

        shuvayatra-text-detail{
            margin-top: 185px;
        }

        shuvayatra-audio-detail{
            margin-top: 185px;
        }
    </style>

    <iron-ajax id="ajax" auto
        url="{{_generateUrl()}}" 
        method="GET"
        params="{{queryParams}}"
        last-response="{{data}}"
        loading="{{isLoading}}">
    </iron-ajax>

    <template is="dom-if" if="{{_checkIfTypeAudio(data.type)}}">
        <shuvayatra-header post data="{{data}}" has-feature-image audio></shuvayatra-header>
        <shuvayatra-audio-detail class="content" post="{{data}}"></shuvayatra-audio-detail>
    </template>

    <template is="dom-if" if="{{_checkIfTypeVideo(data.type)}}">
        <shuvayatra-header post data="{{data}}"></shuvayatra-header>
        <shuvayatra-video-detail class="content" post="{{data}}"></shuvayatra-video-detail>
    </template>

    <template is="dom-if" if="{{_checkIfTypeText(data.type)}}">
        <shuvayatra-header post has-feature-image data="{{data}}"></shuvayatra-header>
        <shuvayatra-text-detail class="content" post="{{data}}"></shuvayatra-text-detail>
    </template>

    <div style="text-align:center;">
        <paper-spinner active="{{isLoading}}"></paper-spinner>
    </div>

</template>
<script>
	Polymer({
        is: 'shuvayatra-post',
        
        properties: {
        	postId:{
        		type: Number
        	},
        },

        ready: function(){
        },

        _generateUrl: function() {
            return "http://192.168.1.59:8081/api/posts/24";
            //return "http://api.shuvayatra.org/api/posts/" + postId;
        },

        _checkIfTypeAudio: function(type){
            return (type === "audio");
        },

        _checkIfTypeVideo: function(type){
            return (type === "video");
        },

        _checkIfTypeText: function(type){
            return (type === "text");
        },
    });
</script>
</dom-module>